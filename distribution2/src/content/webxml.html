<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Waffle - web.xml</title>
      </head>
  <body class="composite">
  <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>web.xml</h2><p>The <b>web.xml</b> below provides a base for you to build your applications upon. Lines <b>11 - 14</b> declare which custom Registrar should be used for your application. The <i>listener</i> registered on lines <b>17 - 19</b> is needed so that Waffle is alerted of application (ServletContext) and session lifecycle events. The filter registered on lines <b>22 - 29</b> is used by Waffle for request level lifecycle event.</p><div class="source"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;web-app version=&quot;2.4&quot;
         xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&gt;

    &lt;display-name&gt;Waffle Example&lt;/display-name&gt;

    &lt;!-- 1. This is how an application registers its custom Registrar --&gt;
    &lt;context-param&gt;
        &lt;param-name&gt;org.codehaus.waffle.registrar.Registrar&lt;/param-name&gt;
        &lt;param-value&gt;org.codehaus.waffle.example.MyRegistrar&lt;/param-value&gt;
    &lt;/context-param&gt;

    &lt;!-- 2. Waffle context listener (ServletContext and HttpSession) --&gt;
    &lt;listener&gt;
        &lt;listener-class&gt;org.codehaus.waffle.context.pico.PicoWaffleContextListener&lt;/listener-class&gt;
    &lt;/listener&gt;

    &lt;!-- 3. Waffle request filter (responsible for request level context) --&gt;
    &lt;filter&gt;
        &lt;filter-name&gt;WaffleRequestFilter&lt;/filter-name&gt;
        &lt;filter-class&gt;org.codehaus.waffle.context.WaffleRequestFilter&lt;/filter-class&gt;
    &lt;/filter&gt;
    &lt;filter-mapping&gt;
        &lt;filter-name&gt;WaffleRequestFilter&lt;/filter-name&gt;
        &lt;url-pattern&gt;*.waffle&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;

    &lt;!-- 4. Register Waffle's FrontController servlet --&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;waffle&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.codehaus.waffle.servlet.WaffleServlet&lt;/servlet-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;view.suffix&lt;/param-name&gt;
            &lt;param-value&gt;.jspx&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;waffle&lt;/servlet-name&gt;
        &lt;url-pattern&gt;*.waffle&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
&lt;/web-app&gt;</pre></div></div>
      </div>
    </div>

  </body>

</html>
